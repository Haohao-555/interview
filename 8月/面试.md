###  2022-08-01

#### 低配版 promise

```javascript
class MyPromise {
  constructor(executor) {
    // 成功回调队列
    this._resolveQueue = [];
    // 失败回调队列
    this._rejectQueue = [];

    let resolve = (val) => {
      while (this._resolveQueue.length) {
        const callback = this._resolveQueue.shift();
        callback(val);
      }
    }

    let reject = (val) => {
      while (this._rejectQueue.length) {
        const callback = this._rejectQueue.shift();
        callback(val);
      }
    }

    // 创建实例对象时，立即执行 executor 并传入 resolve 和 reject
    executor(resolve, reject);
  }

  then = (resolveFunc, rejectFunc) => {
    this._resolveQueue.push(resolveFunc);
    this._rejectQueue.push(rejectFunc);
  }
}

// 测试
const p = new MyPromise((resolve, reject) => {
  setTimeout(() => {
    resolve('result');
  }, 2000);
});

p.then(res => console.log(res)); // result
```

- Promise 构造方法接收一个` executor()`，在 `new Promise()` 时立即执行该任务。
- `executor()` 内部的异步任务会被放入到 宏/微任务队列，等待执行。
- `then()`被执行，收集成功/失败回调，放入成功/失败队列。
- `executor()`的异步任务被执行，触发`resolve/reject`，从成功/失败队列中取出回调依次执行。

<hr>

###  2022-08-02

<hr>

### 2022-08-03

<hr>

### 2022-08-04

<hr>

#### 2022-08-05

<hr>

### 2022-08-06

<hr>

### 2022-08-07

<hr/>